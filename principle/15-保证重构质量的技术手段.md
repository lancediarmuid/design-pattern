- **单元测试**
- 什么是单元测试
- 为什么要写单元测试
- 如何写单元测试

## 什么是单元测试
- 单元测试是有研发工程师编写，用来测试自己写的代码的正确性。
- 单元测试的对象是类或者函数，用来测试一个类和函数是否都按照预期的逻辑执行。这是代码层级的测试。

- 设计覆盖各种正常及异常情况的测试用例，来保证代码在任何预期或非预期的情况下都能正确运行。

## 写单元测试的原因或者好处：
> 单元测试除了能有效地为重构保驾护航之外，也是保证代码质量最有效的两个手段之一。

### 1. 单元测试能有效地帮你发现代码中的 BUG
- 坚持提交的每一份代码都编写完善的单元测试。节省 fix 低级 bug 的事件，去做更有意义的事情。

### 2. 写单元测试能帮你发现代码设计上的问题
- 对于一段代码，如果很难为其编写单元测试，或者单元测试写起来很吃力，需要依靠单元测试框架里很高级的特性才能完成，那一般就意味着代码设计得不够合理，比如，没有使用依赖注入、大量使用静态函数、全局变量、代码高度耦合等。

### 3. 单元测试是对集成测试的有力补充
- 尽管单元测试无法完全替代集成测试，但如果我们能保证每个类、每个函数都能按照我们的预期来执行，底层 bug 少了，那组装起来的整个系统，出问题的概率也就相应减少了。

### 4. 写单元测试的过程本身就是代码重构的过程
- 写单元测试是落地执行持续重构的一个有效途径。
- 设计和实现代码的时候，我们很难把所有的问题都想清楚。而编写单元测试就相当于对代码的一次自我 Code Review，在这个过程中，我们可以发现一些设计上的问题（比如代码设计的不可测试）以及代码编写方面的问题（比如一些边界条件处理不当）等，然后针对性的进行重构。

### 5. 阅读单元测试能帮助你快速熟悉代码
- 单元测试用例实际上就是用户用例，反映了代码的功能和如何使用。
- 借助单元测试，我们不需要深入的阅读代码，便能知道代码实现了什么功能，有哪些特殊情况需要考虑，有哪些边界条件需要处理。

### 6. 单元测试是 TDD 可落地执行的改进方案
- 测试驱动开发（TDD）的核心指导思想就是测试用例先于代码编写。
- 单元测试正好是对 TDD 的一种改进方案，先写代码，紧接着写单元测试，最后根据单元测试反馈出来的问题，回头去重构代码。

## 如何编写单元测试
- 设计覆盖各种输入、异常、边界条件的测试用例，
- 并把这些测试用例翻译成代码；

### 1. 写单元测试真的是件很耗时的事情吗
- 不耗时，代码无需精心设计，过程稍微繁琐一些，大多是复制粘贴；

### 2. 对单元测试的代码质量有什么要求
- 要求相对于业务代码会低很多，测试代码无需在生产中运行，不规范、重复也是可以接受的。

### 3. 单元测试只要覆盖率高就够了吗
- 单元测试覆盖率是作为单元测试写的好坏的评判标准。专门做覆盖率统计的工具： JaCoCo、Cobertura、Emma、Clover。覆盖率的计算方式有：语句覆盖、条件覆盖、判定覆盖、路径覆盖。
- 除了代码覆盖率，还要顾及到 corner case.
- 一个项目的单元测试覆盖率在60~70%即可，无需过度关注单元测试的覆盖率，如果项目对代码质量要求比较搞，可以适当提高单元测试覆盖率的要求。

### 4. 写单元测试需要了解代码的实现逻辑吗
- 单元测试不依赖具体代码实现，不需要了解

### 5. 如何选择单元测试框架
- 看环境……
