## 函数出错应该返回什么？
1. 返回错误码
   - C 语言中没有异常这样的语法机制，因此，返回错误码便是最常见的出错处理方式。而 Java、Python 等比较新的编程语言中，大部分情况下，我们都用异常来处理函数出错的情况，极少会用到错误码。
   - C 语言中，错误码的返回有两种方式：
     - 直接占用函数的返回值，函数正常执行的返回值放到出参中；
     - 架构错误码定义为全局变量，在函数执行出错时，函数调用者通过这个全局变量来获取错误码。
2. 返回 NULL 值
   - 不建议函数返回 NULL 值，这是一种不好的设计思路，主要是因为：
      1. 如果某个函数有可能返回 NULL 值，我们在使用它的时候，忘记了做 NULL 值判断，就有可能会抛出 NPE；
      2. 如果我们定义了很多返回值可能是 NULL 的函数，那代码中就会充斥着大量的 NULL 值判断逻辑，一方面写起来比较繁琐，另一方面它们跟正常的业务逻辑耦合在一起，会影响代码的可读性。
3. 返回空对象
   - 针对返回 NULL 值的种种弊端，应对这个问题有一个比较经典的策略，就是应用 **空对象设计模式** 。即返回 **空字符串** 或 **空集合** 或 **空对象**
4. 抛出异常对象
   - **最常用的函数出错处理方式就是抛出异常**。异常可以携带更多的错误信息，比如函数调用栈信息。
   - 此外，异常可以将正常逻辑和异常逻辑的处理分开，这样代码的可读性就会更好了。
   - C++ 和大部分动态语言都只定义了一种异常类型：运行时异常。（非受检异常）
   - Java 除了运行时异常，还定义了另外一种异常类型：编译时异常。（受检异常）
   - **什么时候抛受检异常，什么时候抛非受检异常？**
     - 对于代码 bug （比如数组越界）以及不可恢复异常（比如数据库连接失败），即便我们捕获了，也做不了太多的抒情，所以，我们倾向于使用非受检异常。
     - 对于可恢复异常、业务异常，比如提现金额大于余额的异常，我们更倾向于使用受检异常，明确告知调用者需要捕获处理。
   - **如何处理函数抛出的异常？**
     - 直接吞掉。

      ```java
         public void func1() throws Exception1 {
         // ...
         }
         
         public void func2() {
         //...
         try {
            func1();
         } catch(Exception1 e) {
            log.warn("...", e); //吐掉：try-catch打印日志
         }
         //...
         }
      ```

     - 原封不动的 re-throw  

      ```java
         public void func1() throws Exception1 {
         // ...
         }
         
         
         public void func2() throws Exception1 {//原封不动的re-throw    Exception1
         //...
         func1();
         //...
         }
      ```

     - 包装成新的异常 re-throw。

      ```java
         public void func1() throws Exception1 {
            // ...
         }


         public void func2() throws Exception2 {
            //...
            try {
               func1();
            } catch(Exception1 e) {
               throw new Exception2("...", e); // wrap成新的Exception2然后re-throw
            }
            //...
         }
      ```